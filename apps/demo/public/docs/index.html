<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ai11y API</title><meta name="description" content="Documentation for ai11y API"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">ai11y API</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>ai11y API</h1></div><div class="tsd-panel tsd-typography"><h1 id="ai11y-a-semantic-ui-context-layer-for-ai-agents" class="tsd-anchor-link">ai11y - A semantic UI context layer for AI agents<a href="#ai11y-a-semantic-ui-context-layer-for-ai-agents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1>
<p>A minimal but powerful SDK that provides semantic UI context for AI agents. The agent can understand annotated UI elements (&quot;markers&quot;), react to runtime errors, and navigate/interact with your app based on natural language commands.</p>
<h2 id="architecture" class="tsd-anchor-link">Architecture<a href="#architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>The SDK consists of:</p>
<p><strong>Packages (libraries):</strong></p>
<ul>
<li><strong><code>packages/core/</code></strong> - Core SDK (markers, store, agents, tool definitions)</li>
<li><strong><code>packages/react/</code></strong> - React bindings (provider, hooks, components)</li>
<li><strong><code>packages/ui/</code></strong> - UI components (chat panel, triggers, message bubbles)</li>
<li><strong><code>packages/server/</code></strong> - Server-side package for secure LLM API calls with extensible tool support</li>
</ul>
<p><strong>Apps (applications):</strong></p>
<ul>
<li><strong><code>apps/demo/</code></strong> - Demo app that uses the SDK</li>
<li><strong><code>apps/server/</code></strong> - Example server application using the server package</li>
</ul>
<h2 id="core-concepts" class="tsd-anchor-link">Core Concepts<a href="#core-concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<h3 id="1-ai11yprovider" class="tsd-anchor-link">1. Ai11yProvider<a href="#1-ai11yprovider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>The <code>Ai11yProvider</code> is the central context provider that maintains:</p>
<ul>
<li><strong>Marker Registry</strong>: A map of <code>markerId → metadata + DOM ref</code> for all marked elements</li>
<li><strong>Assist State</strong>: User-defined JSON state that can be accessed by the agent</li>
<li><strong>Recent Events &amp; Errors</strong>: Tracks application events and errors for context</li>
<li><strong>Imperative API</strong>: Methods exposed via context:
<ul>
<li><code>track(event, payload?)</code> - Track custom events</li>
<li><code>reportError(error, meta?)</code> - Report errors (auto-opens panel)</li>
</ul>
</li>
<li><strong>Tool Functions</strong>: Available from <code>@ai11y/core</code>:
<ul>
<li><code>navigateToRoute(route)</code> - Navigate to a route</li>
<li><code>highlightMarker(markerId, options?)</code> - Visually highlight an element</li>
<li><code>scrollToMarker(markerId)</code> - Scroll to a marker element</li>
<li><code>clickMarker(markerId)</code> - Click a marker element</li>
</ul>
</li>
<li><strong>React-Specific Tools</strong>: Available via <code>useAssistTools()</code> hook (wraps core functions with React features like highlightWrapper, onHighlight callbacks)</li>
</ul>
<h3 id="2-mark-component" class="tsd-anchor-link">2. Mark Component<a href="#2-mark-component" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>The <code>Mark</code> component is a semantic wrapper that registers UI elements with the agent:</p>
<pre><code class="tsx"><span class="hl-0">&lt;</span><span class="hl-1">Mark</span><br/><span class="hl-2">  </span><span class="hl-3">id</span><span class="hl-2">=</span><span class="hl-4">&quot;connect_stripe&quot;</span><br/><span class="hl-2">  </span><span class="hl-3">label</span><span class="hl-2">=</span><span class="hl-4">&quot;Connect Stripe&quot;</span><br/><span class="hl-2">  </span><span class="hl-3">intent</span><span class="hl-2">=</span><span class="hl-4">&quot;Connect Stripe to accept payments&quot;</span><br/><span class="hl-0">&gt;</span><br/><span class="hl-2">  </span><span class="hl-0">&lt;</span><span class="hl-5">button</span><span class="hl-2"> </span><span class="hl-3">onClick</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-7">() </span><span class="hl-6">=&gt;</span><span class="hl-7"> </span><span class="hl-8">connectStripe</span><span class="hl-7">()</span><span class="hl-6">}</span><span class="hl-0">&gt;</span><span class="hl-2">Connect Stripe</span><span class="hl-0">&lt;/</span><span class="hl-5">button</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;/</span><span class="hl-1">Mark</span><span class="hl-0">&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Behavior:</strong></p>
<ul>
<li>On mount: Registers the marker with the provider (id, label, intent, DOM ref)</li>
<li>On unmount: Unregisters the marker</li>
<li>The DOM element is discoverable for highlighting and simulated clicks</li>
<li>Uses React refs (not CSS selectors) for reliable element access</li>
<li><strong>No action prop needed</strong>: The agent simulates browser events (clicks) on the wrapped element, which naturally triggers your existing <code>onClick</code> handlers</li>
</ul>
<h3 id="3-assistpanel" class="tsd-anchor-link">3. AssistPanel<a href="#3-assistpanel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>A floating chat panel in the bottom-right corner that provides:</p>
<ul>
<li>Chat transcript showing user messages, agent replies, and system messages</li>
<li>Input box for user commands</li>
<li>Context collection before sending to agent:
<ul>
<li>Current route</li>
<li>Assist state</li>
<li>Last error (if any)</li>
<li>List of active markers (id + label + intent)</li>
</ul>
</li>
<li>Tool call execution (navigate, highlight, click)</li>
</ul>
<h3 id="4-agent-brain" class="tsd-anchor-link">4. Agent Brain<a href="#4-agent-brain" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>The SDK supports <strong>two agent modes</strong>:</p>
<h4 id="llm-agent-recommended" class="tsd-anchor-link">LLM Agent (Recommended)<a href="#llm-agent-recommended" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4>
<p>The SDK includes server-side LLM integration with function calling. The agent runs securely on your server (not in the browser) and uses AI models to understand natural language and intelligently interact with your app.</p>
<p><strong>Features:</strong></p>
<ul>
<li>Natural language understanding</li>
<li>Context-aware responses</li>
<li>Intelligent tool selection (navigate, click, highlight)</li>
<li>Error explanation and recovery suggestions</li>
<li>Conversational interactions</li>
<li><strong>Secure</strong>: API keys stay on the server, never exposed to the browser</li>
<li><strong>Extensible</strong>: Easy to add custom tools via the server package</li>
</ul>
<h4 id="rule-based-agent-fallback" class="tsd-anchor-link">Rule-Based Agent (Fallback)<a href="#rule-based-agent-fallback" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4>
<p>If no LLM configuration is provided, the SDK falls back to a <strong>rule-based local agent</strong> that parses commands using pattern matching:</p>
<pre><code class="typescript"><span class="hl-6">function</span><span class="hl-2"> </span><span class="hl-8">runAgent</span><span class="hl-2">(</span><span class="hl-9">input</span><span class="hl-2">: </span><span class="hl-1">string</span><span class="hl-2">, </span><span class="hl-9">context</span><span class="hl-2">: </span><span class="hl-1">Ai11yContext</span><span class="hl-2">): </span><span class="hl-1">AgentResponse</span>
</code><button type="button">Copy</button></pre>

<p><strong>Supported Commands:</strong></p>
<ul>
<li><code>&quot;go to X&quot;</code> / <code>&quot;navigate to X&quot;</code> / <code>&quot;open X&quot;</code> → Navigate to route</li>
<li><code>&quot;click X&quot;</code> / <code>&quot;press X&quot;</code> → Click a marked element</li>
<li><code>&quot;highlight X&quot;</code> / <code>&quot;show X&quot;</code> → Highlight a marked element</li>
<li>Error handling: If an error exists, explains it and suggests retry</li>
</ul>
<p>The rule-based agent is useful for development and testing, or when you don't want to use an external API.</p>
<h3 id="5-tool-calls" class="tsd-anchor-link">5. Tool Calls<a href="#5-tool-calls" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>A simple tool protocol:</p>
<pre><code class="typescript"><span class="hl-6">type</span><span class="hl-2"> </span><span class="hl-1">ToolCall</span><span class="hl-2"> =</span><br/><span class="hl-2">  | { </span><span class="hl-9">type</span><span class="hl-2">: </span><span class="hl-4">&quot;navigate&quot;</span><span class="hl-2">; </span><span class="hl-9">route</span><span class="hl-2">: </span><span class="hl-1">string</span><span class="hl-2"> }</span><br/><span class="hl-2">  | { </span><span class="hl-9">type</span><span class="hl-2">: </span><span class="hl-4">&quot;highlight&quot;</span><span class="hl-2">; </span><span class="hl-9">markerId</span><span class="hl-2">: </span><span class="hl-1">string</span><span class="hl-2"> }</span><br/><span class="hl-2">  | { </span><span class="hl-9">type</span><span class="hl-2">: </span><span class="hl-4">&quot;click&quot;</span><span class="hl-2">; </span><span class="hl-9">markerId</span><span class="hl-2">: </span><span class="hl-1">string</span><span class="hl-2"> };</span>
</code><button type="button">Copy</button></pre>

<p>The <code>AssistPanel</code> executes these via provider methods.</p>
<h3 id="6-error-reporting" class="tsd-anchor-link">6. Error Reporting<a href="#6-error-reporting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Errors can be reported programmatically:</p>
<pre><code class="typescript"><span class="hl-9">assist</span><span class="hl-2">.</span><span class="hl-8">reportError</span><span class="hl-2">(</span><span class="hl-9">error</span><span class="hl-2">, {</span><br/><span class="hl-2">  surface?</span><span class="hl-9">:</span><span class="hl-2"> </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-9">markerId</span><span class="hl-2">?: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<p>When an error is reported:</p>
<ul>
<li>It's stored as <code>lastError</code> in context</li>
<li>The <code>AssistPanel</code> auto-opens with a helpful message</li>
<li>The agent can suggest retry actions</li>
</ul>
<h2 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<h3 id="basic-setup" class="tsd-anchor-link">Basic Setup<a href="#basic-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<h4 id="with-rule-based-agent-default" class="tsd-anchor-link">With Rule-Based Agent (Default)<a href="#with-rule-based-agent-default" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4>
<pre><code class="tsx"><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">Ai11yProvider</span><span class="hl-2">, </span><span class="hl-9">AssistPanel</span><span class="hl-2">, </span><span class="hl-9">Mark</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@ai11y/react&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">function</span><span class="hl-2"> </span><span class="hl-8">App</span><span class="hl-2">() {</span><br/><span class="hl-2">  </span><span class="hl-10">return</span><span class="hl-2"> (</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;</span><span class="hl-1">Ai11yProvider</span><span class="hl-2"> </span><span class="hl-3">onNavigate</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-7">(</span><span class="hl-9">route</span><span class="hl-7">) </span><span class="hl-6">=&gt;</span><span class="hl-7"> </span><span class="hl-8">navigate</span><span class="hl-7">(</span><span class="hl-9">route</span><span class="hl-7">)</span><span class="hl-6">}</span><span class="hl-0">&gt;</span><br/><span class="hl-2">      </span><span class="hl-0">&lt;</span><span class="hl-1">YourApp</span><span class="hl-2"> </span><span class="hl-0">/&gt;</span><br/><span class="hl-2">      </span><span class="hl-0">&lt;</span><span class="hl-1">AssistPanel</span><span class="hl-2"> </span><span class="hl-0">/&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;/</span><span class="hl-1">Ai11yProvider</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  );</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h4 id="with-llm-agent-server-side" class="tsd-anchor-link">With LLM Agent (Server-Side)<a href="#with-llm-agent-server-side" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4>
<p><strong>Step 1: Set up the server</strong></p>
<pre><code class="bash"><span class="hl-11"># Install the server package</span><br/><span class="hl-8">pnpm</span><span class="hl-2"> </span><span class="hl-4">add</span><span class="hl-2"> </span><span class="hl-4">@ai11y/agent</span><br/><br/><span class="hl-11"># Set your API key in a .env file (recommended)</span><br/><span class="hl-11"># Create a .env file in your server directory:</span><br/><span class="hl-8">echo</span><span class="hl-2"> </span><span class="hl-4">&quot;OPENAI_API_KEY=your-api-key-here&quot;</span><span class="hl-2"> &gt; </span><span class="hl-4">.env</span>
</code><button type="button">Copy</button></pre>

<p><strong>Step 2: Create a server file</strong></p>
<pre><code class="ts"><span class="hl-11">// server.ts</span><br/><span class="hl-10">import</span><span class="hl-2"> </span><span class="hl-9">Fastify</span><span class="hl-2"> </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&#39;fastify&#39;</span><span class="hl-2">;</span><br/><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">ai11yPlugin</span><span class="hl-2">, </span><span class="hl-10">type</span><span class="hl-2"> </span><span class="hl-9">ServerConfig</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&#39;@ai11y/agent/fastify&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-12">apiKey</span><span class="hl-2"> = </span><span class="hl-9">process</span><span class="hl-2">.</span><span class="hl-9">env</span><span class="hl-2">.</span><span class="hl-12">OPENAI_API_KEY</span><span class="hl-2">;</span><br/><span class="hl-10">if</span><span class="hl-2"> (!</span><span class="hl-9">apiKey</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-10">throw</span><span class="hl-2"> </span><span class="hl-6">new</span><span class="hl-2"> </span><span class="hl-8">Error</span><span class="hl-2">(</span><span class="hl-4">&#39;OPENAI_API_KEY is required&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-12">fastify</span><span class="hl-2"> = </span><span class="hl-8">Fastify</span><span class="hl-2">();</span><br/><br/><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-12">config</span><span class="hl-2">: </span><span class="hl-1">ServerConfig</span><span class="hl-2"> = {</span><br/><span class="hl-2">  </span><span class="hl-9">provider:</span><span class="hl-2"> </span><span class="hl-4">&#39;openai&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-9">apiKey</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-9">model:</span><span class="hl-2"> </span><span class="hl-4">&#39;gpt-5-nano&#39;</span><span class="hl-2">, </span><span class="hl-11">// Optional, defaults to gpt-5-nano</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-10">await</span><span class="hl-2"> </span><span class="hl-9">fastify</span><span class="hl-2">.</span><span class="hl-8">register</span><span class="hl-2">(</span><span class="hl-9">ai11yPlugin</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-9">config</span><span class="hl-2">,</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-10">await</span><span class="hl-2"> </span><span class="hl-9">fastify</span><span class="hl-2">.</span><span class="hl-8">listen</span><span class="hl-2">({ </span><span class="hl-9">port:</span><span class="hl-2"> </span><span class="hl-13">3000</span><span class="hl-2"> });</span>
</code><button type="button">Copy</button></pre>

<p><strong>Step 3: Configure the client</strong></p>
<pre><code class="tsx"><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">Ai11yProvider</span><span class="hl-2">, </span><span class="hl-9">AssistPanel</span><span class="hl-2">, </span><span class="hl-9">Mark</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@ai11y/react&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">function</span><span class="hl-2"> </span><span class="hl-8">App</span><span class="hl-2">() {</span><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-12">agentConfig</span><span class="hl-2"> = {</span><br/><span class="hl-2">    </span><span class="hl-9">apiEndpoint:</span><span class="hl-2"> </span><span class="hl-4">&quot;http://localhost:3000/ai11y/agent&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  };</span><br/><br/><span class="hl-2">  </span><span class="hl-10">return</span><span class="hl-2"> (</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;</span><span class="hl-1">Ai11yProvider</span><span class="hl-2"> </span><br/><span class="hl-2">      </span><span class="hl-3">onNavigate</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-7">(</span><span class="hl-9">route</span><span class="hl-7">) </span><span class="hl-6">=&gt;</span><span class="hl-7"> </span><span class="hl-8">navigate</span><span class="hl-7">(</span><span class="hl-9">route</span><span class="hl-7">)</span><span class="hl-6">}</span><br/><span class="hl-2">      </span><span class="hl-3">agentConfig</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-9">agentConfig</span><span class="hl-6">}</span><br/><span class="hl-2">    </span><span class="hl-0">&gt;</span><br/><span class="hl-2">      </span><span class="hl-0">&lt;</span><span class="hl-1">YourApp</span><span class="hl-2"> </span><span class="hl-0">/&gt;</span><br/><span class="hl-2">      </span><span class="hl-0">&lt;</span><span class="hl-1">AssistPanel</span><span class="hl-2"> </span><span class="hl-0">/&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;/</span><span class="hl-1">Ai11yProvider</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  );</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Important:</strong></p>
<ul>
<li>The LLM agent automatically falls back to rule-based if the API endpoint is unavailable or misconfigured.</li>
<li>API keys are kept secure on the server, never exposed to the browser.</li>
<li>See <code>packages/server/README.md</code> for more details on extending with custom tools.</li>
</ul>
<h3 id="marking-elements" class="tsd-anchor-link">Marking Elements<a href="#marking-elements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<pre><code class="tsx"><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">Mark</span><span class="hl-2">, </span><span class="hl-9">useAssist</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@ai11y/react&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">function</span><span class="hl-2"> </span><span class="hl-8">MyComponent</span><span class="hl-2">() {</span><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-12">reportError</span><span class="hl-2"> } = </span><span class="hl-8">useAssist</span><span class="hl-2">();</span><br/><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-8">handleClick</span><span class="hl-2"> = () </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-10">try</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-8">doSomething</span><span class="hl-2">();</span><br/><span class="hl-2">    } </span><span class="hl-10">catch</span><span class="hl-2"> (</span><span class="hl-9">error</span><span class="hl-2">) {</span><br/><span class="hl-2">      </span><span class="hl-8">reportError</span><span class="hl-2">(</span><span class="hl-9">error</span><span class="hl-2">, { </span><span class="hl-9">markerId:</span><span class="hl-2"> </span><span class="hl-4">&quot;my_button&quot;</span><span class="hl-2"> });</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">  };</span><br/><br/><span class="hl-2">  </span><span class="hl-10">return</span><span class="hl-2"> (</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;</span><span class="hl-1">Mark</span><br/><span class="hl-2">      </span><span class="hl-3">id</span><span class="hl-2">=</span><span class="hl-4">&quot;my_button&quot;</span><br/><span class="hl-2">      </span><span class="hl-3">label</span><span class="hl-2">=</span><span class="hl-4">&quot;My Button&quot;</span><br/><span class="hl-2">      </span><span class="hl-3">intent</span><span class="hl-2">=</span><span class="hl-4">&quot;Perform an important action&quot;</span><br/><span class="hl-2">    </span><span class="hl-0">&gt;</span><br/><span class="hl-2">      </span><span class="hl-0">&lt;</span><span class="hl-5">button</span><span class="hl-2"> </span><span class="hl-3">onClick</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-9">handleClick</span><span class="hl-6">}</span><span class="hl-0">&gt;</span><span class="hl-2">Click Me</span><span class="hl-0">&lt;/</span><span class="hl-5">button</span><span class="hl-0">&gt;</span><br/><span class="hl-2">    </span><span class="hl-0">&lt;/</span><span class="hl-1">Mark</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  );</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Key Points:</strong></p>
<ul>
<li>No <code>action</code> prop needed - just use regular <code>onClick</code> handlers</li>
<li>The agent simulates browser click events, which trigger your existing handlers</li>
<li>Works with any clickable element (buttons, links, divs with onClick, etc.)</li>
<li>Simplifies integration - no need to wrap existing components with action callbacks</li>
</ul>
<h3 id="using-tool-functions" class="tsd-anchor-link">Using Tool Functions<a href="#using-tool-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Tool functions are available directly from the core package:</p>
<pre><code class="tsx"><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">navigateToRoute</span><span class="hl-2">, </span><span class="hl-9">highlightMarker</span><span class="hl-2">, </span><span class="hl-9">clickMarker</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@ai11y/core&quot;</span><span class="hl-2">;</span><br/><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">useAssist</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@ai11y/react&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">function</span><span class="hl-2"> </span><span class="hl-8">MyComponent</span><span class="hl-2">() {</span><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-12">track</span><span class="hl-2"> } = </span><span class="hl-8">useAssist</span><span class="hl-2">();</span><br/><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-8">handleSomething</span><span class="hl-2"> = () </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-8">track</span><span class="hl-2">(</span><span class="hl-4">&quot;custom_event&quot;</span><span class="hl-2">, { </span><span class="hl-9">data:</span><span class="hl-2"> </span><span class="hl-4">&quot;value&quot;</span><span class="hl-2"> });</span><br/><span class="hl-2">    </span><span class="hl-8">navigateToRoute</span><span class="hl-2">(</span><span class="hl-4">&quot;/billing&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-8">highlightMarker</span><span class="hl-2">(</span><span class="hl-4">&quot;some_marker&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-8">clickMarker</span><span class="hl-2">(</span><span class="hl-4">&quot;another_marker&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">  };</span><br/><br/><span class="hl-2">  </span><span class="hl-10">return</span><span class="hl-2"> </span><span class="hl-0">&lt;</span><span class="hl-5">button</span><span class="hl-2"> </span><span class="hl-3">onClick</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-9">handleSomething</span><span class="hl-6">}</span><span class="hl-0">&gt;</span><span class="hl-2">Do Something</span><span class="hl-0">&lt;/</span><span class="hl-5">button</span><span class="hl-0">&gt;</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>For React-specific features (like <code>highlightWrapper</code> or <code>onHighlight</code> callbacks), use the <code>useAssistTools()</code> hook:</p>
<pre><code class="tsx"><span class="hl-10">import</span><span class="hl-2"> { </span><span class="hl-9">useAssistTools</span><span class="hl-2"> } </span><span class="hl-10">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@ai11y/react&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-6">function</span><span class="hl-2"> </span><span class="hl-8">MyComponent</span><span class="hl-2">() {</span><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> { </span><span class="hl-12">navigate</span><span class="hl-2">, </span><span class="hl-12">highlight</span><span class="hl-2">, </span><span class="hl-12">click</span><span class="hl-2"> } = </span><span class="hl-8">useAssistTools</span><span class="hl-2">();</span><br/><br/><span class="hl-2">  </span><span class="hl-6">const</span><span class="hl-2"> </span><span class="hl-8">handleSomething</span><span class="hl-2"> = () </span><span class="hl-6">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-8">navigate</span><span class="hl-2">(</span><span class="hl-4">&quot;/billing&quot;</span><span class="hl-2">);  </span><span class="hl-11">// Calls onNavigate callback if provided</span><br/><span class="hl-2">    </span><span class="hl-8">highlight</span><span class="hl-2">(</span><span class="hl-4">&quot;some_marker&quot;</span><span class="hl-2">);  </span><span class="hl-11">// Uses highlightWrapper if provided</span><br/><span class="hl-2">    </span><span class="hl-8">click</span><span class="hl-2">(</span><span class="hl-4">&quot;another_marker&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">  };</span><br/><br/><span class="hl-2">  </span><span class="hl-10">return</span><span class="hl-2"> </span><span class="hl-0">&lt;</span><span class="hl-5">button</span><span class="hl-2"> </span><span class="hl-3">onClick</span><span class="hl-2">=</span><span class="hl-6">{</span><span class="hl-9">handleSomething</span><span class="hl-6">}</span><span class="hl-0">&gt;</span><span class="hl-2">Do Something</span><span class="hl-0">&lt;/</span><span class="hl-5">button</span><span class="hl-0">&gt;</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="demo-app" class="tsd-anchor-link">Demo App<a href="#demo-app" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>The demo (<code>apps/demo/</code>) demonstrates:</p>
<ul>
<li><strong>Routes</strong>: <code>/</code> (Home), <code>/billing</code>, <code>/integrations</code></li>
<li><strong>Home Page</strong>: Marked buttons for navigation</li>
<li><strong>Billing Page</strong>: &quot;Enable Billing&quot; button with local state</li>
<li><strong>Integrations Page</strong>: &quot;Connect Stripe&quot; button that simulates failure on first click, then succeeds on retry</li>
</ul>
<h3 id="running-the-demo" class="tsd-anchor-link">Running the Demo<a href="#running-the-demo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>This monorepo uses <a href="https://turbo.build/repo">Turborepo</a> for managing builds and dev scripts.</p>
<p><strong>Quick Start:</strong></p>
<pre><code class="bash"><span class="hl-11"># Install all dependencies</span><br/><span class="hl-8">pnpm</span><span class="hl-2"> </span><span class="hl-4">install</span><br/><br/><span class="hl-11"># Set up environment variables</span><br/><span class="hl-6">export</span><span class="hl-2"> </span><span class="hl-9">OPENAI_API_KEY</span><span class="hl-2">=</span><span class="hl-9">your-api-key-here</span><span class="hl-2">  </span><span class="hl-11"># For server (required for LLM agent)</span><br/><br/><span class="hl-11"># Create .env file for demo (optional, for LLM support)</span><br/><span class="hl-8">echo</span><span class="hl-2"> </span><span class="hl-4">&quot;VITE_AI11Y_API_ENDPOINT=http://localhost:3000/ai11y/agent&quot;</span><span class="hl-2"> &gt; </span><span class="hl-4">apps/demo/.env</span><br/><br/><span class="hl-11"># Run everything (frontend + backend) in one command</span><br/><span class="hl-8">pnpm</span><span class="hl-2"> </span><span class="hl-4">dev</span>
</code><button type="button">Copy</button></pre>

<p>This will:</p>
<ul>
<li>Build ai11y packages</li>
<li>Start the server on <code>http://localhost:3000</code> (if <code>OPENAI_API_KEY</code> is set)</li>
<li>Start the demo on <code>http://localhost:5173</code></li>
</ul>
<p><strong>Other Commands:</strong></p>
<pre><code class="bash"><span class="hl-11"># Build all packages</span><br/><span class="hl-8">pnpm</span><span class="hl-2"> </span><span class="hl-4">build</span><br/><br/><span class="hl-11"># Watch mode (rebuilds on changes)</span><br/><span class="hl-8">pnpm</span><span class="hl-2"> </span><span class="hl-4">watch</span>
</code><button type="button">Copy</button></pre>

<p><strong>To enable LLM in the demo:</strong></p>
<ol>
<li>
<p>Set <code>OPENAI_API_KEY</code> environment variable</p>
</li>
<li>
<p>Create a <code>.env</code> file in <code>apps/demo/</code> with:</p>
<pre><code><span class="hl-12">VITE_AI11Y_API_ENDPOINT</span><span class="hl-2">=</span><span class="hl-14">http</span><span class="hl-2">:</span><span class="hl-11">//localhost:3000/ai11y/agent</span>
</code><button>Copy</button></pre>

<p>(The demo will use the rule-based agent if this is not set)</p>
</li>
</ol>
<h2 id="ux-features" class="tsd-anchor-link">UX Features<a href="#ux-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li><strong>Visual Highlighting</strong>: When <code>highlight(markerId)</code> is called, the element is outlined with a blue border for 2 seconds</li>
<li><strong>Click Simulation</strong>: <code>click(markerId)</code> either calls the marker's <code>action</code> function or triggers a native click on the element</li>
<li><strong>Navigation</strong>: When the agent navigates, the route actually changes (integrated with your router)</li>
<li><strong>System Messages</strong>: The panel shows system messages like &quot;Navigated to /billing&quot; and &quot;Clicked Connect Stripe&quot;</li>
<li><strong>Error Recovery</strong>: When errors occur, the agent explains them and guides recovery</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ai11y-a-semantic-ui-context-layer-for-ai-agents"><span>ai11y -<wbr/> <wbr/>A semantic <wbr/>UI context layer for <wbr/>AI agents</span></a><ul><li><a href="#architecture"><span>Architecture</span></a></li><li><a href="#core-concepts"><span>Core <wbr/>Concepts</span></a></li><li><ul><li><a href="#1-ai11yprovider"><span>1. <wbr/>Ai11y<wbr/>Provider</span></a></li><li><a href="#2-mark-component"><span>2. <wbr/>Mark <wbr/>Component</span></a></li><li><a href="#3-assistpanel"><span>3. <wbr/>Assist<wbr/>Panel</span></a></li><li><a href="#4-agent-brain"><span>4. <wbr/>Agent <wbr/>Brain</span></a></li><li><ul><li><a href="#llm-agent-recommended"><span>LLM <wbr/>Agent (<wbr/>Recommended)</span></a></li><li><a href="#rule-based-agent-fallback"><span>Rule-<wbr/>Based <wbr/>Agent (<wbr/>Fallback)</span></a></li></ul></li><li><a href="#5-tool-calls"><span>5. <wbr/>Tool <wbr/>Calls</span></a></li><li><a href="#6-error-reporting"><span>6. <wbr/>Error <wbr/>Reporting</span></a></li></ul></li><li><a href="#usage"><span>Usage</span></a></li><li><ul><li><a href="#basic-setup"><span>Basic <wbr/>Setup</span></a></li><li><ul><li><a href="#with-rule-based-agent-default"><span>With <wbr/>Rule-<wbr/>Based <wbr/>Agent (<wbr/>Default)</span></a></li><li><a href="#with-llm-agent-server-side"><span>With <wbr/>LLM <wbr/>Agent (<wbr/>Server-<wbr/>Side)</span></a></li></ul></li><li><a href="#marking-elements"><span>Marking <wbr/>Elements</span></a></li><li><a href="#using-tool-functions"><span>Using <wbr/>Tool <wbr/>Functions</span></a></li></ul></li><li><a href="#demo-app"><span>Demo <wbr/>App</span></a></li><li><ul><li><a href="#running-the-demo"><span>Running the <wbr/>Demo</span></a></li></ul></li><li><a href="#ux-features"><span>UX <wbr/>Features</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">ai11y API</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
